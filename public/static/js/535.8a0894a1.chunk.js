"use strict";(globalThis.webpackChunkflood=globalThis.webpackChunkflood||[]).push([[535],{4535:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Hn});var i=n(8983),r=n(4537),l=n(1647),a=n(7264),s=n(2747),o=n(7294),d=n(8441),c=n(1540),u=n(879);const h=e=>{let{start:t,destination:n,tags:i,tab:r}=e;const l={};null!=t&&(l.startTorrentsOnLoad=t),null!=n&&""!==n&&(null==l.torrentDestinations&&(l.torrentDestinations=u.Z.floodSettings.torrentDestinations||{}),"string"==typeof(null==i?void 0:i[0])?l.torrentDestinations[i[0]]=n:l.torrentDestinations[""]=n),null!=r&&(l.UITorrentsAddTab=r),c.Z.saveSettings(l)};var m=n(9335),_=n(3529),p=n(1493),g=n(5436);const f=e=>{const{actions:t}=e,n=t.map(((e,t)=>{let n=()=>{};return e.triggerDismiss&&(n=()=>{p.Z.dismissModal()}),"checkbox"===e.type?(0,g.tZ)(d.XZ,{defaultChecked:e.checked,id:e.id,onClick:t=>{null!=e.clickHandler&&e.clickHandler(t),n()},children:e.content},t):(0,g.tZ)(d.zx,{isLoading:e.isLoading,onClick:t=>{null!=e.clickHandler&&e.clickHandler(t),n()},priority:e.type,type:e.submit?"submit":"button",children:e.content},t)})),i=(0,g.tZ)("div",{className:"modal__button-group",children:n});return(0,g.tZ)("div",{className:"modal__actions",children:i})},b=e=>{let{isAddingTorrents:t,onAddTorrentsClick:n}=e;const{i18n:i}=(0,s.mV)();return(0,g.tZ)(f,{actions:[{checked:Boolean(u.Z.floodSettings.startTorrentsOnLoad),clickHandler:null,content:i._("torrents.add.start.label"),id:"start",triggerDismiss:!1,type:"checkbox"},{clickHandler:null,content:i._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{clickHandler:n,content:i._("torrents.add.button.add"),isLoading:t,submit:!0,triggerDismiss:!1,type:"primary"}]})};var Z=n(3279),v=n.n(Z),y=n(4656),C=n(4916),w=n(917),k=n(4166),N=n(6281),O=n(4557),S=n(5051),P=n(932);const x="#5E728C",D={name:"1pkdvdx",styles:"padding:3px 9px"},B=(0,w.iv)({borderBottom:`1px solid ${(0,k.$n)(.43,x)}`,marginBottom:"3px",paddingBottom:"3px",opacity:.75,"&:last-child":{marginBottom:0}},"",""),j=(0,w.iv)({opacity:.5,transition:"color 0.25s",whiteSpace:"nowrap",button:[D,{width:"100%",height:"100%",padding:"3px 9px",textAlign:"left","&:disabled":{pointerEvents:"none"}}]},"",""),X=(0,w.iv)({color:(0,k.p_)(.1,(0,k._j)(.15,x)),background:(0,k.m4)(x,.1),button:{":focus":{outline:"none",WebkitTapHighlightColor:"transparent"}}},"",""),T=(0,w.iv)({opacity:1,cursor:"pointer",transition:"background 0.25s, color 0.25s",userSelect:"none","&:hover":X,"&:focus-within":X},"",""),E={EACCES:"filesystem.error.eacces",ENOENT:"filesystem.error.enoent"};var M={name:"kol7nt",styles:"transform:scale(0.75) rotate(180deg)"},V={name:"1089mxj",styles:"white-space:pre-wrap"},I={name:"1ityoz",styles:"font-weight:lighter"};const R=(0,o.memo)((e=>{let{directory:t,selectable:n,onItemSelection:i,onYieldFocus:r}=e;const[l,a]=(0,o.useState)(null),[d,c]=(0,o.useState)(null),[u,h]=(0,o.useState)(t.includes("/")?"/":"\\"),[m,_]=(0,o.useState)(null),[p,f]=(0,o.useState)(null),b=(0,o.useRef)(null),Z=t.lastIndexOf(u)+1,v=Z>0?t.substr(0,Z):t,y=t.substr(Z);(0,o.useEffect)((()=>{v&&(a(null),_(null),f(null),S.Z.fetchDirectoryList(v).then((e=>{let{files:t,directories:n,separator:i}=e;_(n),f(t),h(i),c(null)})).catch((e=>{let{response:t}=e;c(t)})))}),[v]),(0,o.useEffect)((()=>{if(null!=b.current&&null!=l){var e;const t=null===(e=b.current.children[l])||void 0===e?void 0:e.children[0];0===(null==t?void 0:t.tabIndex)?t.focus():a(Array.from(b.current.children).findIndex((e=>0===e.children[0].tabIndex)))}}),[l]),(0,O.Z)("ArrowUp",(e=>{e.preventDefault(),a((e=>null==e||e-1<0?(null==r||r(),null):e-1))})),(0,O.Z)("ArrowDown",(e=>{e.preventDefault(),a((e=>null!=e?e+1:0))}));let k=null,X=[];if((null==m&&"directories"===n||null==p&&"files"===n)&&(k="filesystem.fetching"),d&&d.data&&d.data.code&&(k=E[d.data.code]||"filesystem.error.unknown"),t){const e=`${v.split(u).slice(0,-2).join(u)}${u}`,t=(0,g.tZ)("li",{css:[j,T,{"@media (max-width: 720px)":B},"",""],children:(0,g.BX)("button",{type:"button",onClick:()=>null==i?void 0:i(e,!0),children:[(0,g.tZ)(C.Eh,{css:M}),".."]})},e),r="files"!==n,l=y?(0,P.Z)(m,(e=>e),y):[],a=l.includes(y)||"directories"!==n||!y||k?[]:(()=>{const e=`${v}${y}${u}`;return[(0,g.tZ)("li",{css:[j,T,"font-weight:bold;@media (max-width: 720px){display:none;}",""],children:(0,g.BX)("button",{type:"button",onClick:()=>null==i?void 0:i(e,!1),children:[(0,g.tZ)(C.Pl,{}),(0,g.tZ)("span",{css:V,children:y}),(0,g.BX)("em",{css:I,children:[" - ",(0,g.tZ)(s.cC,{id:"filesystem.error.enoent"})]})]})},e)]})(),o=(null==m?void 0:m.length)&&(0,N.DY)(m.slice()).desc((e=>l.includes(e))).map((e=>{const t=`${v}${e}${u}`;return(0,g.tZ)("li",{css:[j,r?T:void 0,l.includes(e)?{fontWeight:"bold"}:void 0,"",""],children:(0,g.BX)("button",{type:"button",disabled:!r,tabIndex:r?0:-1,onClick:r?()=>null==i?void 0:i(t,!0):void 0,children:[(0,g.tZ)(C.Bm,{}),e]})},t)}))||[],d="directories"!==n,c=y?(0,P.Z)(p,(e=>e),y):[],h=(null==p?void 0:p.length)&&(0,N.DY)(p.slice()).desc((e=>c.includes(e))).map((e=>{const t=`${v}${e}`;return(0,g.tZ)("li",{css:[j,d?T:void 0,c.includes(e)?{fontWeight:"bold"}:void 0,"",""],children:(0,g.BX)("button",{type:"button",disabled:!d,tabIndex:d?0:-1,onClick:d?()=>null==i?void 0:i(t,!1):void 0,children:[(0,g.tZ)(C.$B,{}),e]})},t)}))||[];0!==o.length||0!==h.length||k||(k="filesystem.empty.directory"),X=[t,...a,...o,...h]}else k="filesystem.error.no.input";return(0,g.BX)("div",{css:(0,w.iv)({color:x,listStyle:"none",padding:"3px 0px",".icon":{fill:"currentColor",height:"14px",width:"14px",marginRight:"5px",marginTop:"-3px",verticalAlign:"middle"}},"",""),children:[v&&(0,g.BX)("li",{css:[j,B,D,"white-space:pre-wrap;.icon{transform:scale(0.9);margin-top:-2px !important;}@media (max-width: 720px){display:none;}",""],children:[(0,g.tZ)(C.DB,{}),v]}),(0,g.tZ)("ul",{ref:b,children:X}),k&&(0,g.tZ)("div",{css:[j,D,"opacity:1;",""],children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:k})})})]})}));R.defaultProps={selectable:void 0,onItemSelection:void 0,onYieldFocus:void 0};const L=R,F=(0,o.forwardRef)(((e,t)=>{var n,i;let{id:r,label:l,selectable:a,suggested:c,showBasePathToggle:h,showCompletedToggle:m,showSequentialToggle:_,onChange:p}=e;const[f,b]=(0,o.useState)(c||(null===(n=u.Z.floodSettings.torrentDestinations)||void 0===n?void 0:n[""])||(null===(i=u.Z.clientSettings)||void 0===i?void 0:i.directoryDefault)||""),[Z,w]=(0,o.useState)(!1),k=(0,o.useRef)(null),N=(0,y.Z)(t),{i18n:O}=(0,s.mV)();(0,o.useEffect)((()=>{const e=()=>{w(!1)},t=t=>{var n;null!==(n=k.current)&&void 0!==n&&n.contains(t.target)||e()};return document.addEventListener("click",t),window.addEventListener("resize",e),()=>{document.removeEventListener("click",t),window.removeEventListener("resize",e)}}),[]);const S=[];return h&&S.push((0,g.tZ)(d.XZ,{grow:!1,id:"isBasePath",children:(0,g.tZ)(s.cC,{id:"torrents.destination.base_path"})},"isBasePath")),m&&S.push((0,g.tZ)(d.XZ,{grow:!1,id:"isCompleted",children:(0,g.tZ)(s.cC,{id:"torrents.destination.completed"})},"isCompleted")),_&&S.push((0,g.tZ)(d.XZ,{grow:!1,id:"isSequential",children:(0,g.tZ)(s.cC,{id:"torrents.destination.sequential"})},"isSequential")),(0,g.BX)(d.y1,{ref:k,children:[(0,g.tZ)(d.p7,{children:(0,g.BX)(d.fE,{autoComplete:Z?"off":void 0,addonPlacement:"after",defaultValue:f,id:r,label:l,onChange:v()((()=>{if(null==N.current)return;const e=N.current.value;p&&p(e),b(e)}),100,{leading:!0}),onClick:e=>e.nativeEvent.stopImmediatePropagation(),placeholder:O._("torrents.add.destination.placeholder"),ref:N,children:[(0,g.tZ)(d.G5,{onClick:()=>{null!=N.current&&b(N.current.value),w(!Z)},children:(0,g.tZ)(C.ol,{})}),(0,g.tZ)(d.h_,{children:(0,g.tZ)(d.xV,{isIn:Z,onClick:e=>e.nativeEvent.stopImmediatePropagation(),overlayProps:{isInteractive:!1},padding:!1,triggerRef:N,children:(0,g.tZ)(L,{directory:f,selectable:a,onItemSelection:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!=N.current&&(N.current.value=e),w(t),b(e)},onYieldFocus:()=>{var e;null===(e=N.current)||void 0===e||e.focus()}})})})]})}),S.length>0?(0,g.tZ)(d.p7,{children:S}):null]})}));F.defaultProps={label:void 0,selectable:void 0,suggested:void 0,showBasePathToggle:!1,showCompletedToggle:!1,showSequentialToggle:!1,onChange:void 0};const $=F;var z=n(4184),U=n.n(z),H=n(1967);const A=e=>{let{defaultValue:t,placeholder:n,id:i,label:r,onTagSelected:l}=e;const[c,h]=(0,o.useState)(!1),[m,_]=(0,o.useState)(t??[]),p=(0,o.useRef)(null),f=(0,o.useRef)(null),b=(0,o.useRef)(null),Z=U()("select form__element",{"select--is-open":c});return(0,a.Z)("Escape",(e=>{e.preventDefault(),h(!1)})),(0,o.useEffect)((()=>{const e=e=>{var t;null!==(t=p.current)&&void 0!==t&&t.contains(e.target)||h(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,o.useEffect)((()=>{null!=b.current&&(b.current.value=m.join()),l&&l(m)}),[m,l]),(0,g.tZ)(d.U2,{ref:p,children:(0,g.tZ)("div",{className:Z,children:(0,g.BX)(d.fE,{autoComplete:c?"off":void 0,id:i||"tags",addonPlacement:"after",defaultValue:t,label:r,onChange:()=>{if(null!=b.current){let e=b.current.value.split(",").map((e=>e.trim())).filter((e=>e.length>0));b.current.value.trimEnd().endsWith(",")&&(e.push(""),e=[...new Set(e)]),_(e)}},placeholder:n,ref:b,children:[(0,g.tZ)(d.G5,{onClick:()=>{h(!c)},className:"select__indicator",children:(0,g.tZ)(C.Tt,{})}),(0,g.tZ)(d.h_,{children:(0,g.tZ)(d.xV,{isIn:c,onClick:e=>{"single"!==u.Z.floodSettings.UITagSelectorMode&&e.nativeEvent.stopImmediatePropagation()},overlayProps:{isInteractive:!1},ref:f,triggerRef:b,children:[...new Set(["untagged",...(0,N.DY)(Object.keys(H.Z.taxonomy.tagCounts)).asc(),...m])].reduce(((e,t)=>(""===t||e.push((0,g.tZ)(d.Ql,{id:t,isSelected:m.includes(t),onClick:()=>{"untagged"===t?_([]):m.includes(t)?_(m.filter((e=>e!==t&&""!==e))):_([...m.filter((e=>""!==e)),t])},children:"untagged"===t?(0,g.tZ)(s.cC,{id:"filter.untagged"}):t},t)),e)),[])})})]})})})};A.defaultProps={id:"tags",label:void 0,defaultValue:void 0,placeholder:void 0,onTagSelected:void 0};const q=A,G=(e,t)=>Object.keys(e).reduce(((n,i)=>{if(i.startsWith(t)){const t=e[i];null!=t&&n.push(t)}return n}),[]),Q=e=>{let{defaultValues:t,id:n,label:i,placeholder:r}=e;const l=(0,o.useRef)(0),[a,s]=(0,o.useState)(t??[{id:0,value:""}]);return(0,g.tZ)(d.y1,{children:a.map(((e,t)=>{let o=null;return t>0&&(o=(0,g.tZ)(d.G5,{onClick:()=>{const e=a.slice();e.splice(t,1),s(e)},children:(0,g.tZ)(C.eJ,{})})),(0,g.tZ)(d.p7,{children:(0,g.BX)(d.fE,{addonPlacement:"after",id:`${n}-${e.id}`,defaultValue:e.value,label:0===t&&i,placeholder:r,wrapperClassName:"textbox-repeater",children:[(0,g.tZ)(d.G5,{onClick:()=>{l.current+=1;const e=a.slice();e.splice(t+1,0,{id:l.current,value:""}),s(e)},children:(0,g.tZ)(C.Rb,{})}),o]})},e.id)}))})};Q.defaultProps={defaultValues:void 0,label:void 0,placeholder:void 0};const W=Q,Y=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[n,i]=(0,o.useState)(!1);return(0,g.BX)(d.l0,{className:"inverse",ref:e,children:[(0,g.tZ)($,{id:"sourcePath",label:t._("torrents.create.source.path.label")}),(0,g.tZ)(W,{id:"trackers",label:t._("torrents.create.trackers.label"),placeholder:t._("torrents.create.tracker.input.placeholder"),defaultValues:[{id:0,value:""}]}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"name",label:t._("torrents.create.base.name.label"),placeholder:t._("torrents.create.base.name.input.placeholder")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"comment",label:t._("torrents.create.comment.label"),placeholder:t._("torrents.create.comment.input.placeholder")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"infoSource",label:t._("torrents.create.info.source.label"),placeholder:t._("torrents.create.info.source.input.placeholder")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.XZ,{grow:!1,id:"isPrivate",children:t._("torrents.create.is.private.label")})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{id:"tags",label:t._("torrents.add.tags"),placeholder:t._("torrents.create.tags.input.placeholder")})}),(0,g.tZ)(b,{onAddTorrentsClick:()=>{if(null==e.current)return;const t=e.current.getFormData();i(!0),null!=t.sourcePath&&(m.Z.createTorrent({name:t.name,sourcePath:t.sourcePath,trackers:G(t,"trackers"),comment:t.comment,infoSource:t.infoSource,isPrivate:t.isPrivate||!1,start:t.start||!1,tags:null!=t.tags?t.tags.split(","):void 0}).then((()=>{_.Z.dismissModal()})),h({start:t.start,destination:t.sourcePath,tab:"by-creation"}))},isAddingTorrents:n})]})};var J=n(463);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne=e=>{let{onFilesChanged:t}=e;const[n,i]=(0,o.useState)([]);return(0,o.useEffect)((()=>{t(n)}),[n,t]),(0,g.BX)(d.U2,{children:[(0,g.tZ)("span",{className:"form__element__label",children:(0,g.tZ)(s.cC,{id:"torrents.add.torrents.label"})}),n.length>0?(0,g.tZ)("div",{onClick:e=>{e.stopPropagation()},role:"none",children:(0,g.tZ)("ul",{className:"dropzone__selected-files interactive-list",children:n.map(((e,t)=>(0,g.BX)("li",{className:"dropzone__selected-files__file interactive-list__item",title:e.name,children:[(0,g.tZ)("span",{className:"interactive-list__icon",children:(0,g.tZ)(C.$B,{})}),(0,g.tZ)("span",{className:"interactive-list__label",children:e.name}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>{const e=n.slice();e.splice(t,1),i(e)},children:(0,g.tZ)(C.x8,{})})]},e.name)))})}):null,(0,g.tZ)(J.ZP,{onDrop:e=>{const t=[];e.forEach((r=>{const l=new FileReader;l.onload=l=>{var a;null!=(null===(a=l.target)||void 0===a?void 0:a.result)&&"string"==typeof l.target.result&&t.push({name:r.name,data:l.target.result.split("base64,")[1]}),t.length===e.length&&i(n.concat(t))},l.readAsDataURL(r)}))},children:e=>{let{getRootProps:t,getInputProps:n,isDragActive:i}=e;return(0,g.BX)("div",ee(ee({},t()),{},{className:"form__dropzone dropzone interactive-list "+(i?"dropzone--is-dragging":""),children:[(0,g.tZ)("input",ee({},n())),(0,g.BX)("div",{className:"dropzone__copy",children:[(0,g.tZ)("div",{className:"dropzone__icon",children:(0,g.tZ)(C.hv,{})}),(0,g.tZ)(s.cC,{id:"torrents.add.tab.file.drop"})," ",(0,g.tZ)("span",{className:"dropzone__browse-button",children:(0,g.tZ)(s.cC,{id:"torrents.add.tab.file.browse"})}),"."]})]}))}})]})},ie=()=>{const e=(0,o.useRef)([]),t=(0,o.useRef)(null),n=(0,o.useRef)(null),[i,r]=(0,o.useState)(!1),{i18n:l}=(0,s.mV)();return(0,g.BX)(d.l0,{className:"inverse",ref:t,children:[(0,g.tZ)(d.p7,{children:(0,g.tZ)(ne,{onFilesChanged:t=>{e.current=t}})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{label:l._("torrents.add.tags"),id:"tags",onTagSelected:e=>{if(null!=n.current){var t;const i=null===(t=u.Z.floodSettings.torrentDestinations)||void 0===t?void 0:t[e[0]];"string"==typeof i&&null!=n.current&&(n.current.value=i,n.current.dispatchEvent(new Event("input",{bubbles:!0})))}}})}),(0,g.tZ)($,{id:"destination",label:l._("torrents.add.destination.label"),ref:n,selectable:"directories",showBasePathToggle:!0,showCompletedToggle:!0,showSequentialToggle:!0}),(0,g.tZ)(b,{onAddTorrentsClick:()=>{var n;if(null==t.current)return;const i=null===(n=t.current)||void 0===n?void 0:n.getFormData();r(!0);const{destination:l,start:a,tags:s,isBasePath:o,isCompleted:d,isSequential:c}=i,u=[];if(e.current.forEach((e=>{u.push(e.data)})),0===u.length||null==l)return void r(!1);const p=null!=s?s.split(",").filter((e=>e.length>0)):void 0;m.Z.addTorrentsByFiles({files:u,destination:l,tags:p,isBasePath:o,isCompleted:d,isSequential:c,start:a}).then((()=>{_.Z.dismissModal()})),h({start:a,destination:l,tags:p,tab:"by-file"})},isAddingTorrents:i})]})};var re=n(4355);var le={name:"izrr19",styles:"float:right;:focus{outline:none;-webkit-tap-highlight-color:transparent;}:focus-visible{outline:dashed;}"},ae={name:"1rawn5e",styles:"font-size:0.8em"};const se=()=>{var e,t;const n=(0,o.useRef)(null),i=(0,o.useRef)(null),[r,l]=(0,o.useState)(!1),{i18n:a}=(0,s.mV)();return(0,g.BX)(d.l0,{className:"inverse",ref:n,children:[(0,g.tZ)(W,{id:"urls",label:(0,g.BX)("div",{children:[a._("torrents.add.torrents.label"),"function"==typeof navigator.registerProtocolHandler&&(0,g.tZ)("button",{css:le,type:"button",onClick:()=>{"function"==typeof navigator.registerProtocolHandler&&navigator.registerProtocolHandler("magnet",`${re.Z.baseURI}?action=add-urls&url=%s`)},children:(0,g.tZ)("em",{css:ae,children:a._("torrents.add.tab.url.register.magnet.handler")})})]}),placeholder:a._("torrents.add.tab.url.input.placeholder"),defaultValues:"add-torrents"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&(null===(t=_.Z.activeModal)||void 0===t?void 0:t.initialURLs)||[{id:0,value:""}]}),(0,g.tZ)(W,{id:"cookies",label:a._("torrents.add.cookies.label"),placeholder:a._("torrents.add.cookies.input.placeholder")}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{id:"tags",label:a._("torrents.add.tags"),onTagSelected:e=>{if(null!=i.current){var t;const n=null===(t=u.Z.floodSettings.torrentDestinations)||void 0===t?void 0:t[e[0]];"string"==typeof n&&null!=i.current&&(i.current.value=n,i.current.dispatchEvent(new Event("input",{bubbles:!0})))}}})}),(0,g.tZ)($,{id:"destination",label:a._("torrents.add.destination.label"),ref:i,selectable:"directories",showBasePathToggle:!0,showCompletedToggle:!0,showSequentialToggle:!0}),(0,g.tZ)(b,{onAddTorrentsClick:()=>{if(null==n.current)return;const e=n.current.getFormData();l(!0);const t=G(e,"urls").filter((e=>""!==e));if(0===t.length||null==e.destination)return void l(!1);const i=G(e,"cookies"),r=t[0].startsWith("http")&&t[0].split("/")[2],a=r?{[r]:i}:void 0,s=null!=e.tags?e.tags.split(",").filter((e=>e.length>0)):void 0;m.Z.addTorrentsByUrls({urls:t,cookies:a,destination:e.destination,isBasePath:e.isBasePath,isCompleted:e.isCompleted,isSequential:e.isSequential,start:e.start,tags:s}).then((()=>{_.Z.dismissModal()})),h({start:e.start,destination:e.destination,tags:s,tab:"by-url"})},isAddingTorrents:r})]})};var oe={name:"1gxvag8",styles:":focus{outline:none;-webkit-tap-highlight-color:transparent;}:focus-visible{outline:dashed;}"};const de=e=>{const{activeTabId:t,tabs:n={},onTabChange:i}=e,r=Object.keys(n).map((e=>{const r=n[e];r.id=e;const l=U()("modal__tab",{"is-active":e===t});return(0,g.tZ)("li",{className:l,children:(0,g.tZ)("button",{css:oe,type:"button",onClick:()=>{i&&i(r)},children:r.label})},e)}));return(0,g.tZ)("ul",{className:"modal__tabs",children:r})};de.defaultProps={tabs:{}};const ce=de;function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _e=e=>{const{alignment:t,size:n,orientation:i,tabsInBody:r,inverse:l,initialTabId:a,className:s,content:d,heading:c,tabs:u,actions:h}=e,m=U()("modal__content__wrapper",`modal--align-${t}`,`modal--size-${n}`,{"modal--horizontal":"horizontal"===i,"modal--vertical":"vertical"===i,"modal--tabs-in-header":!r,"modal--tabs-in-body":r,inverse:l},s);let _=d;const p=c,b=U()("modal__header",{"has-tabs":u});let Z,v,y;const[C,w]=(0,o.useState)(a??Object.keys(u||{})[0]);if(u){const e=u[C],t=U()("modal__content",e.modalContentClasses),n=e.content,i=e.props,l=(0,g.tZ)(ce,{activeTabId:C,onTabChange:e=>{null!=e.id&&w(e.id)},tabs:u},"modal-tabs");r?Z=l:y=l,_=[Z,(0,g.tZ)("div",{className:t,children:(0,g.tZ)(n,he({},i))},"modal-content")]}return h&&(v=(0,g.tZ)("div",{className:"modal__footer",children:(0,g.tZ)(f,{actions:h})})),(0,g.BX)("div",{className:m,children:[(0,g.BX)("div",{className:b,children:[p,y]}),(0,g.BX)("div",{className:"modal__body",children:[_,v]})]})};_e.defaultProps={alignment:"left",className:null,inverse:!0,size:"medium",orientation:"horizontal",tabsInBody:!1,content:void 0,actions:void 0,tabs:void 0,initialTabId:void 0};const pe=_e,ge=()=>{var e,t;const{i18n:n}=(0,s.mV)(),i={"by-url":{content:se,label:n._("torrents.add.tab.url.title")},"by-file":{content:ie,label:n._("torrents.add.tab.file.title")},"by-creation":{content:Y,label:n._("torrents.add.tab.create.title")}};if("add-torrents"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;let r="by-url";return null!==(t=_.Z.activeModal.initialURLs)&&void 0!==t&&t.length||(r=u.Z.floodSettings.UITorrentsAddTab??r),(0,g.tZ)(pe,{heading:n._("torrents.add.heading"),tabs:i,initialTabId:r})},fe=(0,l.Pi)((()=>{var e;if("confirm"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;const{actions:t,content:n,heading:i}=_.Z.activeModal||{};return(0,g.tZ)(pe,{actions:t,content:(0,g.tZ)("div",{className:"modal__content",children:n}),heading:i})}));var be=n(9669),Ze=n.n(be),ve=n(8949);function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ce=new class{constructor(){ye(this,"feeds",[]),ye(this,"rules",[]),ye(this,"items",[]),(0,ve.ky)(this)}setFeeds(e){this.feeds=null!=e?[...e].sort(((e,t)=>e.label.localeCompare(t.label))):[]}setRules(e){this.rules=null!=e?[...e].sort(((e,t)=>e.label.localeCompare(t.label))):[]}handleFeedMonitorsFetchSuccess(e){this.setFeeds(e.feeds),this.setRules(e.rules)}handleItemsFetchSuccess(e){this.items=e}},{baseURI:we}=re.Z,ke={addFeed:e=>Ze().put(`${we}api/feed-monitor/feeds`,e).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()})),modifyFeed:(e,t)=>Ze().patch(`${we}api/feed-monitor/feeds/${e}`,t).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()})),addRule:e=>Ze().put(`${we}api/feed-monitor/rules`,e).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()})),fetchFeedMonitors:()=>Ze().get(`${we}api/feed-monitor`).then((e=>e.data)).then((e=>{Ce.handleFeedMonitorsFetchSuccess(e)}),(()=>{})),fetchItems:e=>{let{id:t,search:n}=e;return Ze().get(`${we}api/feed-monitor/feeds/${t}/items`,{params:{search:n}}).then((e=>e.data)).then((e=>{Ce.handleItemsFetchSuccess(e)}),(()=>{}))},removeFeedMonitor:e=>Ze().delete(`${we}api/feed-monitor/${e}`).then((e=>e.data)).then((()=>{ke.fetchFeedMonitors()}),(()=>{}))},Ne=ke,Oe=/^(?:https?|ftp):\/\/.{1,}\.{1}.{1,}/,Se=e=>null!=e&&""!==e,Pe=e=>{try{new RegExp(e)}catch(e){return!1}return!0},xe=e=>{var t;let{rule:n,isSubmitting:i,isPatternMatched:r,onCancel:l}=e;const{feeds:a}=Ce,{i18n:o}=(0,s.mV)();return(0,g.BX)(d.y1,{children:[(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"label",label:o._("feeds.label"),defaultValue:n.label}),(0,g.tZ)(d.Ph,{disabled:!a.length,id:"feedID",label:o._("feeds.applicable.feed"),defaultID:null===(t=n.feedIDs)||void 0===t?void 0:t[0],children:0===a.length?[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.no.feeds.available"})})},"empty")]:a.reduce(((e,t)=>e.concat((0,g.tZ)(d.Ql,{id:`${t._id}`,children:t.label},t._id))),[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.select.feed"})})},"select-feed")])})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"match",label:o._("feeds.match.pattern"),placeholder:o._("feeds.regEx"),defaultValue:n.match,width:"three-eighths"}),(0,g.tZ)(d.fE,{id:"exclude",label:o._("feeds.exclude.pattern"),placeholder:o._("feeds.regEx"),defaultValue:n.exclude,width:"three-eighths"})]}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{addonPlacement:"after",id:"check",label:o._("feeds.test.match"),placeholder:o._("feeds.check"),children:r&&(0,g.tZ)(d.G5,{children:(0,g.tZ)(C.FV,{})})})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.U2,{children:(0,g.tZ)($,{id:"destination",label:o._("feeds.torrent.destination"),selectable:"directories",suggested:n.destination,showBasePathToggle:!0})}),(0,g.tZ)(q,{id:"tags",label:o._("feeds.apply.tags"),placeholder:o._("feeds.tags"),defaultValue:n.tags})]}),(0,g.BX)(d.p7,{align:"end",justify:"end",children:[(0,g.tZ)("br",{}),(0,g.tZ)(d.XZ,{id:"startOnLoad",defaultChecked:n.startOnLoad,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"feeds.start.on.load"})}),(0,g.tZ)(d.zx,{onClick:l,children:(0,g.tZ)(s.cC,{id:"button.cancel"})}),(0,g.tZ)(d.zx,{type:"submit",isLoading:i,children:(0,g.tZ)(s.cC,{id:"button.save.feed"})})]})]})},De=e=>{let{children:t}=e;return(0,g.tZ)("h2",{className:"h4",children:t})},Be=(0,l.Pi)((e=>{let{currentRule:t,onSelect:n,onRemove:i}=e;const{rules:r}=Ce;return 0===r.length?(0,g.tZ)("ul",{className:"interactive-list",children:(0,g.tZ)("li",{className:"interactive-list__item",children:(0,g.tZ)(s.cC,{id:"feeds.no.rules.defined"})})}):(0,g.tZ)("ul",{className:"interactive-list",children:r.map((e=>{const r=e.count||0;let l=null,a=null;if(e.exclude&&(l=(0,g.BX)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",children:[(0,g.tZ)(s.cC,{id:"feeds.exclude"}),": ",e.exclude]})),e.tags&&e.tags.length>0){const t=e.tags.map((e=>(0,g.tZ)("span",{className:"tag",children:e},e)));a=(0,g.BX)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",children:[(0,g.tZ)(s.cC,{id:"feeds.tags"}),": ",t]})}return(0,g.BX)("li",{className:"interactive-list__item interactive-list__item--stacked-content",children:[(0,g.BX)("div",{className:"interactive-list__label",children:[(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:e.label}),(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail-list__item--overflow interactive-list__detail interactive-list__detail--secondary",children:(0,g.tZ)(s.cC,{id:"feeds.match.count",values:{count:r}})}),e===t&&(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:"Modifying"})]}),(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.BX)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",style:{maxWidth:"50%",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,g.tZ)(s.cC,{id:"feeds.match"}),": ",e.match]}),(0,g.tZ)("div",{style:{width:"100%"}}),l,a]})]}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action",type:"button",onClick:()=>n(e),children:(0,g.tZ)(C.I8,{})}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>i(e),children:(0,g.tZ)(C.x8,{})})]},e._id)}))})})),je=Be;function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Me={label:"",feedIDs:[],match:"",exclude:"",tags:[],destination:"",startOnLoad:!1},Ve={destination:{isValid:Se,error:"feeds.validation.must.specify.destination"},feedID:{isValid:e=>Se(e)&&"placeholder"!==e,error:"feeds.validation.must.select.feed"},label:{isValid:Se,error:"feeds.validation.must.specify.label"},match:{isValid:e=>Se(e)&&Pe(e),error:"feeds.validation.invalid.regular.expression"},exclude:{isValid:e=>!Se(e)||Pe(e),error:"feeds.validation.invalid.regular.expression"}},Ie=(e,t)=>{var n,i;return null!==(n=Ve[e])&&void 0!==n&&n.isValid(t)||null===(i=Ve[e])||void 0===i?void 0:i.error},Re=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[n,i]=(0,o.useState)(null),[r,l]=(0,o.useState)({}),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),[m,_]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1);return(0,g.BX)(d.l0,{className:"inverse",onChange:e=>{let{event:t,formData:n}=e;const i=t.target.name,a=n;l(Te(Te({},r),{},{[i]:Ie(i,a[i])})),f((()=>{const{check:e,match:t="",exclude:n=""}=a;if(Se(e)&&Pe(t)&&Pe(n)){const i=new RegExp(t,"gi").test(e),r=""!==n&&new RegExp(n,"gi").test(e);return i&&!r}return!1})()),_(!0)},onSubmit:async()=>{if(null==e.current)return;const t=e.current.getFormData(),r=Object.keys(Ve).reduce(((e,n)=>{const i=n;return Te(Te({},e),{},{[i]:Ie(i,t[i])})}),{});l(r);const a=Object.keys(r).every((e=>void 0===r[e]));var s;m&&a&&(h(!0),null!=(null==n?void 0:n._id)&&await Ne.removeFeedMonitor(n._id),await Ne.addRule({label:t.label??Me.label,feedIDs:[t.feedID??""],field:t.field,match:t.match??Me.match,exclude:t.exclude??Me.exclude,destination:t.destination??Me.destination,tags:(null===(s=t.tags)||void 0===s?void 0:s.split(","))??Me.tags,startOnLoad:t.startOnLoad??Me.startOnLoad,isBasePath:t.isBasePath??!1}).then((()=>{var t;null===(t=e.current)||void 0===t||t.resetForm(),l({}),i(null),c(!1)}),(()=>{l({backend:"general.error.unknown"})})),h(!1))},ref:e,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"feeds.existing.rules"})}),Object.keys(r).reduce(((e,n)=>(null!=r[n]&&e.push((0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:t._(null==r?void 0:r[n])})},`error-${n}`)),e)),[]),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.U2,{children:(0,g.tZ)(je,{currentRule:n,onSelect:e=>{i(e),c(!0)},onRemove:e=>{null!=e._id&&Ne.removeFeedMonitor(e._id),e===n&&(i(null),c(!1))}})})}),a?(0,g.tZ)(xe,{rule:n??Me,isPatternMatched:p,isSubmitting:u,onCancel:()=>{i(null),c(!1)}}):(0,g.BX)(d.p7,{align:"end",justify:"end",children:[(0,g.tZ)("br",{}),(0,g.tZ)(d.zx,{onClick:()=>{c(!0)},children:(0,g.tZ)(s.cC,{id:"button.new"})})]})]})},Le=e=>{let{currentFeed:t,defaultFeed:n,intervalMultipliers:i,isSubmitting:r,onCancel:l}=e;const{i18n:a}=(0,s.mV)(),o=(null==t?void 0:t.interval)??n.interval;let c=o,u=1;return i.forEach((e=>{const t=e.value;o%t==0&&(c=o/t,u=t)})),(0,g.BX)(d.y1,{children:[(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"label",label:a._("feeds.label"),placeholder:a._("feeds.label"),defaultValue:(null==t?void 0:t.label)??n.label}),(0,g.tZ)(d.fE,{id:"interval",label:a._("feeds.select.interval"),placeholder:a._("feeds.interval"),defaultValue:c,width:"one-eighth"}),(0,g.tZ)(d.Ph,{labelOffset:!0,defaultID:u,id:"intervalMultiplier",width:"one-eighth",children:i.map((e=>(0,g.tZ)(d.Ql,{id:e.value,children:a._(e.message)},e.value)))})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"url",label:a._("feeds.url"),placeholder:a._("feeds.url"),defaultValue:(null==t?void 0:t.url)??(null==n?void 0:n.url)}),(0,g.tZ)(d.zx,{labelOffset:!0,onClick:l,children:(0,g.tZ)(s.cC,{id:"button.cancel"})}),(0,g.tZ)(d.zx,{labelOffset:!0,type:"submit",isLoading:r,children:(0,g.tZ)(s.cC,{id:"button.save.feed"})})]})]})},Fe=(0,l.Pi)((e=>{let{selectedFeedID:t}=e;const{items:n}=Ce,i=[];if(t){const e={};n.forEach(((t,n)=>{let{title:r}=t;const l=e[r];null==l?e[r]=2:(r=`${r} #${l}`,e[r]+=1),i.push((0,g.BX)("li",{className:"interactive-list__item interactive-list__item--stacked-content feed-list__feed",children:[(0,g.tZ)("div",{className:"interactive-list__label feed-list__feed-label",children:r}),(0,g.tZ)(d.XZ,{id:`${n}`})]},r))}))}return(0,g.tZ)(d.p7,{children:0===i.length?(0,g.tZ)("ul",{className:"interactive-list",children:(0,g.tZ)("li",{className:"interactive-list__item",children:(0,g.tZ)("div",{className:"interactive-list__label",children:(0,g.tZ)(s.cC,{id:"feeds.no.items.matching"})})})}):(0,g.tZ)("ul",{className:"interactive-list feed-list",children:i})})})),$e=Fe,ze=(0,l.Pi)((()=>{const{i18n:e}=(0,s.mV)(),t=(0,o.useRef)(null),[n,i]=(0,o.useState)(null),{feeds:r}=Ce;return null!=n&&(r.some((e=>e._id===n))||i(null)),(0,g.BX)(d.l0,{className:"inverse",onChange:e=>{let{event:t,formData:n}=e;const r=n;"checkbox"!==t.target.type&&(i(r.feedID),Ne.fetchItems({id:r.feedID,search:r.search}))},onSubmit:()=>{if(null==t.current)return;const e=t.current.getFormData(),n=Ce.items.filter(((t,n)=>e[n])).map(((e,t)=>({id:t,value:e.urls[0]})));p.Z.displayModal({id:"add-torrents",initialURLs:n})},ref:t,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"feeds.browse.feeds"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.Ph,{disabled:!r.length,grow:!1,id:"feedID",label:e._("feeds.select.feed"),width:"three-eighths",children:r.length?r.reduce(((e,t)=>null==t._id?e:e.concat((0,g.tZ)(d.Ql,{id:t._id,children:t.label},t._id))),[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.select.feed"})})},"select-feed")]):[(0,g.tZ)(d.Ql,{id:"placeholder",isPlaceholder:!0,children:(0,g.tZ)("em",{children:(0,g.tZ)(s.cC,{id:"feeds.no.feeds.available"})})},"empty")]}),n&&(0,g.tZ)(d.fE,{id:"search",label:e._("feeds.search.term"),placeholder:e._("feeds.search")}),n&&(0,g.tZ)(d.zx,{type:"submit",labelOffset:!0,children:(0,g.tZ)(s.cC,{id:"button.download"})},"button")]}),n&&(0,g.tZ)($e,{selectedFeedID:n})]})})),Ue=ze,He=(0,l.Pi)((e=>{let{currentFeed:t,intervalMultipliers:n,onSelect:i,onRemove:r}=e;const{feeds:l}=Ce,{i18n:a}=(0,s.mV)();return 0===l.length?(0,g.tZ)("ul",{className:"interactive-list",children:(0,g.tZ)("li",{className:"interactive-list__item",children:(0,g.tZ)(s.cC,{id:"feeds.no.feeds.defined"})})}):(0,g.tZ)("ul",{className:"interactive-list feed-list",children:l.map((e=>{const l=e.count||0;let o=`${e.interval}`,d=n[0].message;return n.forEach((t=>{e.interval%t.value==0&&(o=""+e.interval/t.value,d=t.message)})),(0,g.BX)("li",{className:"interactive-list__item interactive-list__item--stacked-content feed-list__feed",children:[(0,g.BX)("div",{className:"interactive-list__label",children:[(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:e.label}),(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail-list__item--overflow interactive-list__detail interactive-list__detail--secondary",children:(0,g.tZ)(s.cC,{id:"feeds.match.count",values:{count:l}})}),e===t&&(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail--primary",children:"Modifying"})]}),(0,g.BX)("ul",{className:"interactive-list__detail-list",children:[(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail interactive-list__detail--tertiary",children:`${o} ${a._(d)}`}),(0,g.tZ)("li",{className:"interactive-list__detail-list__item interactive-list__detail-list__item--overflow interactive-list__detail interactive-list__detail--tertiary",children:(0,g.tZ)("a",{href:e.url,rel:"noopener noreferrer",target:"_blank",children:e.url})})]})]}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action",type:"button",onClick:()=>i(e),children:(0,g.tZ)(C.I8,{})}),(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>r(e),children:(0,g.tZ)(C.x8,{})})]},e._id)}))})})),Ae=He;function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const We={url:{isValid:e=>null!=e&&""!==e&&null!==e.match(Oe),error:"feeds.validation.must.specify.valid.feed.url"},label:{isValid:Se,error:"feeds.validation.must.specify.label"},interval:{isValid:e=>{if(null===e||""===e)return!1;const t=parseInt(`${e}`,10);return!Number.isNaN(t)&&t>0},error:"feeds.validation.interval.not.positive"}},Ye=(e,t)=>{var n,i;return null!==(n=We[e])&&void 0!==n&&n.isValid(t)||null===(i=We[e])||void 0===i?void 0:i.error},Je=[{message:"feeds.time.min",value:1},{message:"feeds.time.hr",value:60},{message:"feeds.time.day",value:1440}],Ke={label:"",interval:5,url:""},et=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[n,i]=(0,o.useState)(null),[r,l]=(0,o.useState)({}),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1);return(0,g.BX)("div",{children:[(0,g.BX)(d.l0,{className:"inverse",onChange:e=>{let{event:t,formData:n}=e;const i=t.target.name,a=n;l(Ge(Ge({},r),{},{[i]:Ye(i,a[i])}))},onSubmit:async()=>{var t;const r=null===(t=e.current)||void 0===t?void 0:t.getFormData();if(null==e.current||null==r)return;h(!0);const a=Object.keys(We).reduce(((e,t)=>{const n=t;return Ge(Ge({},e),{},{[n]:Ye(n,r[n])})}),{});l(a);if(Object.keys(a).every((e=>void 0===a[e]))){const t={label:r.label,url:r.url,interval:Number(r.interval)*Number(r.intervalMultiplier)};let a=!0;try{null===n?await Ne.addFeed(t):null!=(null==n?void 0:n._id)&&await Ne.modifyFeed(n._id,t)}catch{a=!1}a?(e.current.resetForm(),l({}),i(null),c(!1)):l({backend:"general.error.unknown"})}h(!1)},ref:e,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"feeds.existing.feeds"})}),Object.keys(r).reduce(((e,n)=>(null!=r[n]&&e.push((0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:t._(null==r?void 0:r[n])})},`error-${n}`)),e)),[]),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.U2,{children:(0,g.tZ)(Ae,{currentFeed:n,intervalMultipliers:Je,onSelect:e=>{i(e),c(!0)},onRemove:e=>{e===n&&(a&&(l({}),c(!1)),i(null)),null!=e._id&&Ne.removeFeedMonitor(e._id)}})})}),a?(0,g.tZ)(Le,{currentFeed:n,defaultFeed:Ke,intervalMultipliers:Je,isSubmitting:u,onCancel:()=>{l({}),c(!1),i(null)}}):(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.U2,{width:"auto"}),(0,g.tZ)(d.zx,{onClick:()=>{c(!0)},children:(0,g.tZ)(s.cC,{id:"button.new"})})]})]}),(0,g.tZ)(Ue,{})]})},tt=()=>{const{i18n:e}=(0,s.mV)();(0,o.useEffect)((()=>{Ne.fetchFeedMonitors()}),[]);const t={feeds:{content:et,label:e._("feeds.tabs.feeds")},downloadRules:{content:Re,label:e._("feeds.tabs.download.rules")}};return(0,g.tZ)(pe,{heading:e._("feeds.tabs.heading"),orientation:"horizontal",size:"large",tabs:t})};var nt=n(4936);let it;!function(e){e[e.HTTP=1]="HTTP",e[e.UDP=2]="UDP",e[e.DHT=3]="DHT"}(it||(it={}));const rt=(e,t)=>{let n=`magnet:?xt=urn:btih:${e}`;return null!=t&&t.length&&t.forEach((e=>{n=`${n}&tr=${encodeURI(e)}`})),n},lt=()=>{var e;const t=(0,o.useRef)(null),n=(0,o.useRef)(null),{i18n:i}=(0,s.mV)(),[r,l]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)({isLoadingTrackers:!0,magnetTrackersLink:""});(0,o.useEffect)((()=>{m.Z.fetchTorrentTrackers(nt.Z.selectedTorrents[0]).then((e=>{null!=e&&h({isLoadingTrackers:!1,magnetTrackersLink:rt(nt.Z.selectedTorrents[0],e.filter((e=>e.type!==it.DHT)).map((e=>e.url)))})}))}),[]);const _=rt(nt.Z.selectedTorrents[0]);return(0,g.tZ)(pe,{heading:i._("torrents.generate.magnet.heading"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.BX)(d.l0,{children:[null!==(e=nt.Z.torrents[nt.Z.selectedTorrents[0]])&&void 0!==e&&e.isPrivate?(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:i._("torrents.generate.magnet.private.torrent")})}):null,(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"magnet",ref:t,addonPlacement:"after",label:i._("torrents.generate.magnet.magnet"),defaultValue:_,readOnly:!0,children:(0,g.tZ)(d.G5,{onClick:()=>{var e;if("function"==typeof(null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText))navigator.clipboard.writeText(_).then((()=>{l(!0)}));else if(null!=t.current){var n;null===(n=t.current)||void 0===n||n.select(),document.execCommand("copy"),l(!0)}},children:r?(0,g.tZ)(C.FV,{}):(0,g.tZ)(C.TU,{})})})}),(0,g.tZ)(d.p7,{children:u.isLoadingTrackers?(0,g.tZ)(d.fE,{id:"loading",label:i._("torrents.generate.magnet.magnet.with.trackers"),placeholder:i._("torrents.generate.magnet.loading.trackers"),disabled:!0}):(0,g.tZ)(d.fE,{id:"magnet-trackers",ref:n,addonPlacement:"after",label:i._("torrents.generate.magnet.magnet.with.trackers"),defaultValue:u.magnetTrackersLink,readOnly:!0,children:(0,g.tZ)(d.G5,{onClick:()=>{var e;if("function"==typeof(null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText))navigator.clipboard.writeText(u.magnetTrackersLink).then((()=>{c(!0)}));else if(null!=n.current){var t;null===(t=n.current)||void 0===t||t.select(),document.execCommand("copy"),c(!0)}},children:a?(0,g.tZ)(C.FV,{}):(0,g.tZ)(C.TU,{})})})})]})}),actions:[{clickHandler:null,content:i._("button.close"),triggerDismiss:!0,type:"tertiary"}]})},at=e=>{const t=e[0];if(!e.some((e=>!e.includes(t))))return t},st=()=>{const{i18n:e}=(0,s.mV)(),[t,n]=(0,o.useState)(!1);return(0,g.tZ)(pe,{heading:e._("torrents.move.heading"),content:(0,g.tZ)("div",{className:"modal__content",children:(0,g.BX)(d.l0,{className:"inverse",onSubmit:e=>{let{formData:t}=e;const i=nt.Z.selectedTorrents;i.length>0&&(n(!0),m.Z.moveTorrents({hashes:i,destination:t.destination,isBasePath:t.isBasePath,moveFiles:t.moveFiles,isCheckHash:t.isCheckHash}).then((()=>{_.Z.dismissModal(),n(!1)})))},children:[(0,g.tZ)($,{id:"destination",selectable:"directories",suggested:at(nt.Z.selectedTorrents.map((e=>nt.Z.torrents[e].directory))),showBasePathToggle:!0}),(0,g.tZ)(f,{actions:[{checked:!0,content:e._("torrents.move.data.label"),id:"moveFiles",type:"checkbox"},{checked:!1,content:e._("torrents.move.check_hash.label"),id:"isCheckHash",type:"checkbox"},{content:e._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{content:e._("torrents.move.button.set.location"),isLoading:t,submit:!0,type:"primary"}]})]})})})},ot=()=>{const{i18n:e}=(0,s.mV)(),[t,n]=(0,o.useState)(!1),{selectedTorrents:i}=nt.Z;return 0===i.length?(0,g.tZ)(pe,{heading:e._("torrents.remove"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.tZ)(d.l0,{children:(0,g.tZ)(d.p7,{children:(0,g.tZ)(s.cC,{id:"torrents.remove.error.no.torrents.selected"})})})}),actions:[{clickHandler:null,content:e._("button.ok"),triggerDismiss:!0,type:"primary"}]}):(0,g.tZ)(pe,{heading:e._("torrents.remove"),content:(0,g.tZ)("div",{className:"modal__content",children:(0,g.BX)(d.l0,{className:"inverse",onSubmit:e=>{let{formData:t}=e;n(!0);const i=t.deleteData;m.Z.deleteTorrents({hashes:nt.Z.selectedTorrents,deleteData:i}).then((()=>{n(!1),(e=>{let{deleteData:t}=e;null!=t&&c.Z.saveSetting("deleteTorrentData",t)})({deleteData:i}),_.Z.dismissModal()}))},children:[(0,g.tZ)(d.p7,{children:(0,g.tZ)(s.cC,{id:"torrents.remove.are.you.sure",values:{count:i.length}})}),(0,g.tZ)(f,{actions:[{checked:u.Z.floodSettings.deleteTorrentData,content:e._("torrents.remove.delete.data"),id:"deleteData",type:"checkbox"},{content:e._("button.no"),triggerDismiss:!0,type:"tertiary"},{content:e._("button.yes"),isLoading:t,submit:!0,type:"primary"}]})]})})})},dt=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[n,i]=(0,o.useState)(!1);return(0,g.tZ)(pe,{heading:t._("torrents.set.tags.heading"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.tZ)(d.l0,{ref:e,children:(0,g.tZ)(d.p7,{children:(0,g.tZ)(q,{defaultValue:nt.Z.selectedTorrents.map((e=>nt.Z.torrents[e].tags))[0].slice(),id:"tags",placeholder:t._("torrents.set.tags.enter.tags")})})})}),actions:[{content:t._("button.cancel"),clickHandler:null,triggerDismiss:!0,type:"tertiary"},{content:t._("torrents.set.tags.button.set"),clickHandler:()=>{if(null==e.current)return;const{selectedTorrents:t}=nt.Z,n=e.current.getFormData(),r=n.tags?n.tags.split(","):[];i(!0),(null==t?void 0:t.length)>0&&m.Z.setTags({hashes:t,tags:r})},isLoading:n,triggerDismiss:!1,type:"primary"}]})},ct=()=>{const e=(0,o.useRef)(null),{i18n:t}=(0,s.mV)(),[n,i]=(0,o.useState)(!1),[r,l]=(0,o.useState)({isLoadingTrackers:!0,trackerURLs:[]});return(0,o.useEffect)((()=>{m.Z.fetchTorrentTrackers(nt.Z.selectedTorrents[0]).then((e=>{null!=e&&l({isLoadingTrackers:!1,trackerURLs:e.filter((e=>e.type!==it.DHT)).map((e=>e.url))})}))}),[]),(0,g.tZ)(pe,{heading:t._("torrents.set.trackers.heading"),content:(0,g.tZ)("div",{className:"modal__content inverse",children:(0,g.tZ)(d.l0,{ref:e,children:r.isLoadingTrackers?(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{id:"loading",placeholder:t._("torrents.set.trackers.loading.trackers"),disabled:!0})}):(0,g.tZ)(W,{id:"trackers",placeholder:t._("torrents.set.trackers.enter.tracker"),defaultValues:0===r.trackerURLs.length?void 0:r.trackerURLs.map(((e,t)=>({id:t,value:e})))})})}),actions:[{clickHandler:null,content:t._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{clickHandler:()=>{if(null==e.current||n||r.isLoadingTrackers)return;i(!0);const t=e.current.getFormData(),l=G(t,"trackers").filter((e=>""!==e));m.Z.setTrackers({hashes:nt.Z.selectedTorrents,trackers:l}).then((()=>{i(!1),_.Z.dismissModal()}))},content:t._("torrents.set.trackers.button.set"),isLoading:n||r.isLoadingTrackers,triggerDismiss:!1,type:"primary"}]})},ut="4.7.0",ht=(0,o.lazy)((()=>n.e(443).then(n.t.bind(n,6641,23)).then((e=>({default:e.react}))))),mt="https://github.com/jesec/flood",_t=()=>(0,g.tZ)(o.Suspense,{fallback:null,children:(0,g.tZ)(ht,{FloodVersion:()=>ut,CommitBadge:()=>ut.length>8?(0,g.tZ)("a",{href:mt,children:(0,g.tZ)("img",{alt:"Latest version of rolling build",src:"https://img.shields.io/npm/v/@jesec/flood?label=HEAD"})}):(0,g.tZ)("a",{href:mt,children:(0,g.tZ)("img",{alt:"Commits since user's version",src:`https://img.shields.io/github/commits-since/jesec/flood/v${ut}`})})})});var pt=n(8111),gt=n(2552),ft=n(2809),bt=n(4982);const Zt=(0,l.Pi)((()=>{const e=(0,o.useRef)(null),t=(0,o.useRef)(null),[n,l]=(0,o.useState)(null),[a,c]=(0,o.useState)(!1),[u,h]=(0,o.useState)(!1),{i18n:m}=(0,s.mV)();if((0,o.useEffect)((()=>{gt.Z.currentUser.isAdmin&&pt.Z.fetchUsers().then((()=>{c(!0)}))}),[]),!gt.Z.currentUser.isAdmin)return(0,g.BX)(d.l0,{children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"auth.user.accounts"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:(0,g.tZ)(s.cC,{id:"auth.message.not.admin"})})})]});const _=!a&&0===gt.Z.users.length,p=U()("interactive-list",{"interactive-list--loading":_});return(0,g.BX)(d.l0,{onSubmit:()=>{if(null==e.current||null==t.current)return;const n=e.current.getFormData();if(null==n.username||""===n.username)l("auth.error.username.empty");else if(null==n.password||""===n.password)l("auth.error.password.empty");else{h(!0);const i=t.current;if(null==i)return l("connection.settings.error.empty"),void h(!1);pt.Z.createUser({username:n.username,password:n.password,client:i,level:!0===n.isAdmin?ft.u.ADMINISTRATOR:ft.u.USER}).then((()=>{null!=e.current&&e.current.resetForm(),l(null),h(!1)}),(()=>{l("general.error.unknown"),h(!1)})).then(pt.Z.fetchUsers)}},ref:e,children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"auth.user.accounts"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.U2,{children:(0,g.BX)("ul",{className:p,children:[(0,g.tZ)(r.Z,{children:_&&(0,g.tZ)(i.Z,{classNames:"interactive-list__loading-indicator",timeout:{enter:250,exit:250},children:(0,g.tZ)("div",{className:"interactive-list__loading-indicator",children:(0,g.tZ)(d.$z,{})},"loading-indicator")})}),gt.Z.users.slice().sort(((e,t)=>e.username.localeCompare(t.username))).map((e=>{const t=e.username===gt.Z.currentUser.username;let n=null,i=null;t?n=(0,g.tZ)("span",{className:"interactive-list__label__tag tag",children:(0,g.tZ)(s.cC,{id:"auth.current.user"})}):i=(0,g.tZ)("button",{className:"interactive-list__icon interactive-list__icon--action interactive-list__icon--action--warning",type:"button",onClick:()=>pt.Z.deleteUser(e.username).then(pt.Z.fetchUsers),children:(0,g.tZ)(C.x8,{})});const r=U()("interactive-list__item",{"interactive-list__item--disabled":t});return(0,g.BX)("li",{className:r,children:[(0,g.BX)("span",{className:"interactive-list__label",children:[(0,g.tZ)("div",{className:"interactive-list__label__text",children:e.username}),n]}),i]},e.username)}))]})})}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"auth.add.user"})}),n&&(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Xq,{children:m._(n)})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{id:"username",label:(0,g.tZ)(s.cC,{id:"auth.username"}),placeholder:m._("auth.username"),autoComplete:"username"}),(0,g.tZ)(d.fE,{id:"password",label:(0,g.tZ)(s.cC,{id:"auth.password"}),placeholder:m._("auth.password"),autoComplete:"new-password"}),(0,g.tZ)(d.XZ,{grow:!1,id:"isAdmin",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"auth.admin"})})]}),(0,g.tZ)(bt.Z,{onSettingsChange:e=>{t.current=e}}),(0,g.tZ)("p",{}),(0,g.tZ)(d.p7,{justify:"end",children:(0,g.tZ)(d.zx,{isLoading:u,priority:"primary",type:"submit",children:(0,g.tZ)(s.cC,{id:"button.add"})})})]})})),vt=(e,t)=>{var n;return null!=e[t]?e[t]:null===(n=u.Z.clientSettings)||void 0===n?void 0:n[t]},yt=e=>{const t=e.target,n=t.name,{value:i,type:r,checked:l}=t;let a={};return a="checkbox"===r?{[n]:l}:{[n]:i},a};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Nt=e=>{if(e&&0!==e.length)return e.join(", ")},Ot=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===e?[]:e.replace(/\s/g,"").split(",").map((e=>Number(e)))},St=e=>{let{onSettingsChange:t,onClientSettingsChange:n}=e;const[i,r]=(0,o.useState)({});return(0,g.BX)(d.l0,{onChange:e=>{let{event:l,formData:a}=e;const s=l.target;if("dropdownPresetDownload"===s.name||"dropdownPresetUpload"===s.name)return void t({speedLimits:{download:Ot(a.dropdownPresetDownload),upload:Ot(a.dropdownPresetUpload)}});const o=wt(wt({},i),yt(l));r(o),n(o)},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.heading"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:null!=u.Z.floodSettings.speedLimits?Nt(u.Z.floodSettings.speedLimits.download):0,label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.dropdown.preset.download.label"}),id:"dropdownPresetDownload"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:null!=u.Z.floodSettings.speedLimits?Nt(u.Z.floodSettings.speedLimits.upload):0,label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.dropdown.preset.upload.label"}),id:"dropdownPresetUpload"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(i,"throttleGlobalDownSpeed"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.global.throttle.download"}),id:"throttleGlobalDownSpeed"}),(0,g.tZ)(d.fE,{defaultValue:vt(i,"throttleGlobalUpSpeed"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.transferrate.global.throttle.upload"}),id:"throttleGlobalUpSpeed"})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(i,"throttleMaxUploads"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.upload.label"}),id:"throttleMaxUploads"}),(0,g.tZ)(d.fE,{defaultValue:vt(i,"throttleMaxUploadsGlobal"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.upload.global.label"}),id:"throttleMaxUploadsGlobal"})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(i,"throttleMaxDownloads"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.download.label"}),id:"throttleMaxDownloads"}),(0,g.tZ)(d.fE,{defaultValue:vt(i,"throttleMaxDownloadsGlobal"),label:(0,g.tZ)(s.cC,{id:"settings.bandwidth.slots.download.global.label"}),id:"throttleMaxDownloadsGlobal"})]})]})};function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Bt=e=>{let{onClientSettingsChange:t}=e;const[n,i]=(0,o.useState)({});return(0,g.BX)(d.l0,{onChange:e=>{let{event:r}=e;const l=xt(xt({},n),yt(r));i(l),t(l)},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.connectivity.incoming.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(n,"networkPortRange"),id:"networkPortRange",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.port.range.label"}),width:"one-quarter"}),(0,g.tZ)(d.XZ,{defaultChecked:vt(n,"networkPortRandom"),grow:!1,id:"networkPortRandom",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.port.randomize.label"})}),(0,g.tZ)(d.XZ,{defaultChecked:vt(n,"networkPortOpen"),grow:!1,id:"networkPortOpen",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.port.open.label"})})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(n,"networkLocalAddress"),id:"networkLocalAddress",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.ip.hostname.label"})}),(0,g.tZ)(d.fE,{defaultValue:vt(n,"networkHttpMaxOpen"),id:"networkHttpMaxOpen",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.max.http.connections"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.connectivity.dpd.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(n,"dhtPort"),id:"dhtPort",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.dht.port.label"}),width:"one-quarter"}),(0,g.tZ)(d.XZ,{defaultChecked:vt(n,"dht"),grow:!1,id:"dht",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.dht.label"})}),(0,g.tZ)(d.XZ,{defaultChecked:vt(n,"protocolPex"),grow:!1,id:"protocolPex",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.connectivity.peer.exchange.label"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.heading"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(n,"throttleMinPeersNormal"),id:"throttleMinPeersNormal",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.min.label"})}),(0,g.tZ)(d.fE,{defaultValue:vt(n,"throttleMaxPeersNormal"),id:"throttleMaxPeersNormal",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.max.label"})})]}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(n,"throttleMinPeersSeed"),id:"throttleMinPeersSeed",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.seeding.min.label"})}),(0,g.tZ)(d.fE,{defaultValue:vt(n,"throttleMaxPeersSeed"),id:"throttleMaxPeersSeed",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.seeding.max.label"})})]}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:vt(n,"trackersNumWant"),id:"trackersNumWant",label:(0,g.tZ)(s.cC,{id:"settings.connectivity.peers.desired.label"}),width:"one-half"})})]})};var jt=n(5181),Xt=n(8826),Tt=n(4920),Et=n(9471),Mt=n(6436),Vt=n(4387),It=n(9242),Rt=n.n(It),Lt=n(6408);const Ft=Rt()([(0,Mt.E)("globally-draggable-item",{beginDrag(e){let{list:t,id:n,index:i,isVisible:r}=e;return{list:t,id:n,index:i,isVisible:r}},canDrag(e){let{isLocked:t}=e;return!t}},((e,t)=>({connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}))),(0,Vt.G)("globally-draggable-item",{drop(e){let{onDrop:t}=e;t&&t()},hover(e,t){const n=t.getItem();e.isLocked||n.index===e.index||n.list===e.list&&(e.onMove(n.index,e.index),n.index=e.index)}},(e=>({connectDropTarget:e.dropTarget()})))])((e=>{const{children:t,isDragging:n,isLocked:i,connectDragPreview:r,connectDragSource:l,connectDropTarget:a}=e;return(0,o.useEffect)((()=>{r((0,Lt.r)(),{captureDraggingState:!0})})),l(a((0,g.BX)("div",{className:U()("sortable-list__item",{"sortable-list__item--is-dragging":n,"sortable-list__item--is-locked":i}),children:[i?(0,g.tZ)(C.HE,{}):null,t]})))}));var $t={name:"1d3w5wq",styles:"width:100%"};const zt=e=>{let{className:t,id:n,items:i,lockedIDs:r,renderItem:l,onMouseDown:a,onMove:s,onDrop:d}=e;const[c,u]=(0,o.useState)(i),h=U()("sortable-list",t);return(0,g.tZ)("div",{css:$t,role:"none",onMouseDown:e=>{a&&a(e)},children:(0,g.tZ)(Et.WG,{options:Tt.r,children:(0,g.tZ)("ul",{className:h,children:c.map(((e,t)=>{const{id:i,visible:a}=e;return(0,g.tZ)(Ft,{list:n,id:i,index:t,isLocked:r.includes(i),isVisible:a,onDrop:()=>{d&&d(c)},onMove:(e,t)=>{const n=c[e],i=c.slice();i.splice(e,1),i.splice(t,0,n),u(i),s&&s(i)},children:l(e,t)},i)}))})})})};zt.defaultProps={onMouseDown:void 0,onMove:void 0,onDrop:void 0};const Ut=zt;function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Gt=e=>{let{onSettingsChange:t}=e;const[n,i]=(0,o.useState)((()=>{const{mountPoints:e}=u.Z.floodSettings,t=Object.assign({},...Xt.Z.disks.map((e=>({[e.target]:e}))));return e.filter((e=>e in t)).map((e=>({id:e,visible:!0}))).concat(Object.keys(t).filter((t=>!e.includes(t))).map((e=>({id:e,visible:!1}))))})());return(0,g.tZ)(Ut,{id:"disks",className:"sortable-list--disks",items:n.slice(),lockedIDs:[],onDrop:e=>{i(e)},renderItem:e=>{const{id:r,visible:l}=e,a=(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--secondary",children:(0,g.tZ)(d.XZ,{defaultChecked:l,id:r,onClick:e=>{const l=n.map((t=>t.id===r?At(At({},t),{},{visible:e.target.checked}):t));t({mountPoints:l.filter((e=>e.visible)).map((e=>e.id))}),i(l)},children:(0,g.tZ)(s.cC,{id:"settings.diskusage.show"})})});return(0,g.BX)("div",{className:"sortable-list__content sortable-list__content__wrapper",children:[(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--primary",children:(0,g.tZ)("div",{children:r})}),a]})}})},Qt=e=>{let{onSettingsChange:t}=e;return(0,g.BX)(d.l0,{children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.diskusage.mount.points"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(Gt,{onSettingsChange:t})})]})};function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Kt=e=>{let{onClientSettingsChange:t}=e;const[n,i]=(0,o.useState)({});return(0,g.BX)(d.l0,{onChange:e=>{let{event:r}=e;const l=Yt(Yt({},n),yt(r));i(l),t(l)},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.resources.disk.heading"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:vt(n,"directoryDefault"),id:"directoryDefault",label:(0,g.tZ)(s.cC,{id:"settings.resources.disk.download.location.label"})})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.fE,{defaultValue:vt(n,"networkMaxOpenFiles"),id:"networkMaxOpenFiles",label:(0,g.tZ)(s.cC,{id:"settings.resources.max.open.files"}),width:"one-half"}),(0,g.tZ)(d.XZ,{defaultChecked:vt(n,"piecesHashOnCompletion"),grow:!1,id:"piecesHashOnCompletion",labelOffset:!0,matchTextboxHeight:!0,children:(0,g.tZ)(s.cC,{id:"settings.resources.disk.check.hash.label"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.resources.memory.heading"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.fE,{defaultValue:vt(n,"piecesMemoryMax"),id:"piecesMemoryMax",label:(0,g.BX)("div",{children:[(0,g.tZ)(s.cC,{id:"settings.resources.memory.max.label"})," ",(0,g.tZ)("em",{className:"unit",children:"(MB)"})]}),width:"one-half"})})]})};var en=n(7731);var tn={name:"1d3w5wq",styles:"width:100%"},nn={name:"15rw530",styles:".sortable-list__item{cursor:default;}"};const rn=e=>{let{className:t,checkboxLabel:n,items:i}=e;return(0,g.tZ)("div",{css:tn,role:"none",children:(0,g.tZ)("ul",{className:U()("sortable-list",t),css:nn,children:i.map((e=>{const{id:t,label:i,isLocked:r=!1,defaultChecked:l,onClick:a}=e;return(0,g.BX)("li",{className:U()("sortable-list__item",{"sortable-list__item--is-locked":r}),children:[r?(0,g.tZ)(C.HE,{}):null,(0,g.BX)("div",{className:"sortable-list__content sortable-list__content__wrapper",children:[(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--primary",children:(0,g.tZ)(s.cC,{id:i})}),r?null:(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--secondary",children:(0,g.tZ)(d.XZ,{defaultChecked:l,id:t,onClick:e=>null==a?void 0:a(e.target.checked),children:n&&(0,g.tZ)(s.cC,{id:n})})})]})]},t||i)}))})})};rn.defaultProps={className:void 0,checkboxLabel:void 0};const ln=rn;var an=n(8737),sn=n(2433);const on=e=>{let{onSettingsChange:t}=e;const n=(0,o.useRef)(sn.Z.torrentContextMenuActions.map((e=>{var t;let{id:n,visible:i}=e;return{id:n,visible:(null===(t=u.Z.floodSettings.torrentContextMenuActions.find((e=>e.id===n)))||void 0===t?void 0:t.visible)??i}})));return(0,g.tZ)(ln,{checkboxLabel:"settings.ui.torrent.context.menu.items.show",items:Object.keys(an.Z).map((e=>({label:an.Z[e],isLocked:"start"===e||"stop"===e||"setTaxonomy"===e||"torrentDetails"===e,defaultChecked:n.current.some((t=>t.id===e&&t.visible)),onClick:()=>{const i=n.current.find((t=>t.id===e));null!=i&&(i.visible=!i.visible),t({torrentContextMenuActions:n.current})}})))})};var dn=n(882),cn=n(9097);const un=e=>{let{torrentListViewSize:t,onSettingsChange:n}=e;const i=(0,o.useRef)(null),[r,l]=(0,o.useState)([...u.Z.floodSettings.torrentListColumns.filter((e=>null!=dn.Z[e.id])).slice(),...Object.keys(dn.Z).filter((e=>u.Z.floodSettings.torrentListColumns.every((t=>t.id!==e)))).map((e=>({id:e,visible:!1})))]),a="expanded"===t?["name","eta","downRate","percentComplete","downTotal","upRate"]:[];return(0,g.tZ)(Ut,{id:"torrent-details",className:"sortable-list--torrent-details",items:r,lockedIDs:a,onMouseDown:()=>{var e;null===(e=i.current)||void 0===e||e.dismissTooltip()},onDrop:e=>{const t=e.slice();n({torrentListColumns:t}),l(t)},renderItem:(e,o)=>{const{id:c,visible:u}=e;let h=null,m=null;if(a.includes(c)||(h=(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--secondary",children:(0,g.tZ)(d.XZ,{defaultChecked:u,id:c,onClick:e=>{const t=r.map((t=>({id:t.id,visible:t.id===c?e.target.checked:t.visible})));n({torrentListColumns:t}),l(t)},children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.details.enabled"})})})),"tags"===c&&"expanded"===t&&o<r.length-1){const e=(0,g.tZ)(s.cC,{id:"settings.ui.torrent.details.tags.placement"});m=(0,g.tZ)(cn.Z,{className:"tooltip tooltip--is-error",content:e,offset:-5,ref:i,width:200,wrapperClassName:"sortable-list__content sortable-list__content--secondary tooltip__wrapper",wrapText:!0,children:(0,g.tZ)(C.jj,{})})}return(0,g.BX)("div",{className:"sortable-list__content sortable-list__content__wrapper",children:[m,(0,g.tZ)("span",{className:"sortable-list__content sortable-list__content--primary",children:(0,g.tZ)(s.cC,{id:dn.Z[c]})}),h]})}})},hn=e=>{let{onSettingsChange:t}=e;const{i18n:n}=(0,s.mV)(),[i,r]=(0,o.useState)(u.Z.floodSettings.torrentListViewSize),[l,a]=(0,o.useState)(u.Z.floodSettings.language),[c,h]=(0,o.useState)(u.Z.floodSettings.UITagSelectorMode);return(0,g.BX)(d.l0,{onChange:e=>{let{event:n,formData:l}=e;const s=n.target;if("radio"===s.type&&(r(l["ui-torrent-size"]),h(l["ui-tag-selector-mode"]),t({torrentListViewSize:i,UITagSelectorMode:c})),"language"===s.name){const e=l.language;a(e),t({language:e})}},children:[(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.language"})},"locale-header"),(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.Ph,{defaultID:l,id:"language",children:Object.keys(en.Z).map((e=>(0,g.tZ)(d.Ql,{id:e,children:null!=en.Z[e].id?n._(en.Z[e].id):en.Z[e]},e)))})},"locale-selection"),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.tag.selector.mode"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.Y8,{defaultChecked:"single"===c,groupID:"ui-tag-selector-mode",id:"single",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.tag.selector.mode.single"})}),(0,g.tZ)(d.Y8,{defaultChecked:"multi"===c,groupID:"ui-tag-selector-mode",id:"multi",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.tag.selector.mode.multi"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.list"})}),(0,g.BX)(d.p7,{children:[(0,g.tZ)(d.Y8,{defaultChecked:"expanded"===i,groupID:"ui-torrent-size",id:"expanded",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.size.expanded"})}),(0,g.tZ)(d.Y8,{defaultChecked:"condensed"===i,groupID:"ui-torrent-size",id:"condensed",width:"auto",children:(0,g.tZ)(s.cC,{id:"settings.ui.torrent.size.condensed"})})]}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.displayed.details"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(un,{torrentListViewSize:i,onSettingsChange:t})}),(0,g.tZ)(De,{children:(0,g.tZ)(s.cC,{id:"settings.ui.displayed.context.menu.items"})}),(0,g.tZ)(d.p7,{children:(0,g.tZ)(on,{onSettingsChange:t})})]})};function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const gn=(0,l.Pi)((()=>{const{i18n:e}=(0,s.mV)(),[t,n]=(0,o.useState)({}),[i,r]=(0,o.useState)({}),[l,a]=(0,o.useState)(!1),d=e=>{n(_n(_n({},t),e))},u=e=>{r(_n(_n({},i),e))},h=_n(_n({bandwidth:{content:St,props:{onClientSettingsChange:d,onSettingsChange:u},label:e._("settings.tabs.bandwidth")},connectivity:{content:Bt,props:{onClientSettingsChange:d},label:e._("settings.tabs.connectivity")},resources:{content:Kt,props:{onClientSettingsChange:d},label:e._("settings.tabs.resources")}},"none"!==re.Z.authMethod?{authentication:{content:Zt,label:e._("settings.tabs.authentication")}}:{}),{},{ui:{content:hn,label:e._("settings.tabs.userinterface"),props:{onSettingsChange:u}},diskusage:{content:Qt,label:e._("settings.tabs.diskusage"),props:{onSettingsChange:u}},about:{content:_t,label:e._("settings.tabs.about")}});return(0,g.tZ)(pe,{actions:[{clickHandler:null,content:e._("button.cancel"),triggerDismiss:!0,type:"tertiary"},{clickHandler:()=>{a(!0),Promise.all([c.Z.saveSettings(i,{alert:!0}),jt.Z.saveSettings(t,{alert:!0})]).then((()=>{a(!1),_.Z.dismissModal()}))},isLoading:l,content:e._("button.save"),triggerDismiss:!1,type:"primary"}],size:"large",heading:e._("settings.tabs.heading"),orientation:re.Z.isSmallScreen?"horizontal":"vertical",tabs:h})})),fn=()=>{const{i18n:e}=(0,s.mV)(),t=(0,o.useRef)(Ze().CancelToken.source()),n=(0,o.useRef)(null),[i,r]=(0,o.useState)(null),[l,a]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0),[h,p]=(0,o.useState)(!1);(0,o.useEffect)((()=>{var e;const{current:n}=t;var i;"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&m.Z.fetchMediainfo(null===(i=_.Z.activeModal)||void 0===i?void 0:i.hash,t.current.token).then((e=>{r(e.output),u(!1)}),(e=>{Ze().isCancel(e)||(a(e.response.data),u(!1))}));return()=>{n.cancel()}}),[]);let f="mediainfo.heading";return c?f="mediainfo.fetching":l&&(f="mediainfo.execError"),(0,g.BX)("div",{className:"torrent-details__section mediainfo modal__content--nested-scroll__content",children:[(0,g.BX)("div",{className:"mediainfo__toolbar",children:[(0,g.tZ)("div",{className:"mediainfo__toolbar__item",children:(0,g.tZ)("span",{className:"torrent-details__table__heading--tertiary",children:(0,g.tZ)(s.cC,{id:f})})}),i&&(0,g.tZ)(cn.Z,{content:e._(h?"general.clipboard.copied":"general.clipboard.copy"),wrapperClassName:"tooltip__wrapper mediainfo__toolbar__item",children:(0,g.tZ)(d.zx,{priority:"tertiary",onClick:()=>{var e;null!=i&&("function"==typeof(null===(e=navigator.clipboard)||void 0===e?void 0:e.writeText)?navigator.clipboard.writeText(i).then((()=>{p(!0)})):null!=n.current&&(n.current.value=i,n.current.select(),document.execCommand("copy"),p(!0)))},children:h?(0,g.tZ)(C.MC,{}):(0,g.tZ)(C.TU,{})})})]}),(0,g.tZ)("input",{ref:n,style:{width:"0.1px",height:"1px",position:"absolute",right:0}}),l?(0,g.tZ)("pre",{className:"mediainfo__output mediainfo__output--error",children:l.message}):(0,g.tZ)("pre",{className:"mediainfo__output",children:i})]})};function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const yn=(e,t)=>Zn(Zn(Zn(Zn({},e),null!=e.directories?{directories:Object.assign({},...Object.keys(e.directories).map((n=>null!=e.directories?{[n]:yn(e.directories[n],t)}:{})))}:{}),null!=e.files?{files:Object.assign({},...Object.keys(e.files).map((n=>null!=e.files?{[n]:Zn(Zn({},e.files[n]),{},{isSelected:t})}:{})))}:{}),{},{isSelected:t}),Cn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{depth:i,path:r,select:l,type:a}=t,s=r[n];if(n===i-1){var o;if("file"===a&&null!=(null===(o=e.files)||void 0===o?void 0:o[s])){const t=Zn(Zn({},e.files),{},{[s]:Zn(Zn({},e.files[s]),{},{isSelected:l})});return Zn(Zn({},e),{},{files:t,isSelected:Object.values(t).every((e=>{let{isSelected:t}=e;return t}))&&(null==e.directories||Object.values(e.directories).every((e=>{let{isSelected:t}=e;return t})))})}if("directory"===a&&null!=e.directories){const t=Zn(Zn({},e.directories),{},{[s]:yn(e.directories[s],l)});return Zn(Zn({},e),{},{directories:t,isSelected:Object.values(t).every((e=>{let{isSelected:t}=e;return t}))&&(null==e.files||Object.values(e.files).every((e=>{let{isSelected:t}=e;return t})))})}return e}if(null!=e.directories){const i=e.directories;return Object.keys(i).forEach((e=>{e===s&&(i[e]=Cn(i[e],t,n+1))})),Zn(Zn({},e),{},{directories:i,isSelected:Object.values(i).every((e=>{let{isSelected:t}=e;return t}))})}return e},wn=e=>{const t=[];if(null!=e.files){const{files:n}=e;Object.keys(n).forEach((e=>{const i=n[e];i.isSelected&&t.push(i.index)}))}if(null!=e.directories){const{directories:n}=e;Object.keys(n).forEach((e=>{t.push(...wn(n[e]))}))}return t},kn={selectAll:yn,applySelection:Cn,getSelectedItems:wn,getSelectionTree:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={isSelected:t};return e.forEach((e=>{const i=e.path.split("/");let r=n;for(;i.length-1;){const e=i.shift();null==r.directories&&(r.directories={}),null==r.directories[e]&&(r.directories[e]={isSelected:t}),r=r.directories[e]}null==r.files&&(r.files={}),r.files[e.filename]=Zn(Zn({},e),{},{isSelected:t})})),n}};var Nn=n(2036),On=n(2104);const Sn=e=>{let{depth:t,items:n,hash:i,path:r,onItemSelect:l}=e;const[a,s]=(0,o.useState)(null),c=(0,o.useRef)({});if(null==n)return null;const u=Object.values(n).sort(((e,t)=>e.filename.localeCompare(t.filename))).map((e=>{var o;const u=n&&n[e.filename]&&n[e.filename].isSelected||!1,h=U()("directory-tree__node file","directory-tree__node--file directory-tree__node--selectable",{"directory-tree__node--selected":u});return(0,g.BX)("div",{className:h,title:e.filename,children:[(0,g.BX)("div",{className:"file__label file__detail",children:[(0,g.BX)("div",{className:"file__checkbox directory-tree__checkbox",children:[(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--checkbox",children:(0,g.tZ)(d.XZ,{checked:u,id:`${e.index}`,onClick:()=>l({type:"file",depth:t,path:[...r,e.filename],select:!u})})}),(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--icon",children:(0,g.tZ)(C.$B,{})})]}),(0,g.tZ)("div",{className:"file__name",children:(0,g.tZ)("a",{href:`${re.Z.baseURI}api/torrents/${i}/contents/${e.index}/data`,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:e.filename})})]}),(0,g.tZ)("div",{className:"file__detail file__detail--secondary",children:(0,g.tZ)(On.Z,{value:e.sizeBytes,precision:1})}),(0,g.BX)("div",{className:"file__detail file__detail--secondary",children:[Math.trunc(e.percentComplete),"%"]}),(0,g.tZ)("div",{className:"file__detail file__detail--secondary file__detail--priority",children:(0,g.tZ)(Nn.Z,{level:e.priority,id:e.index,maxLevel:2,onChange:(e,t)=>m.Z.setFilePriority(i,{indices:[Number(e)],priority:t}),priorityType:"file"},`${e.index}-${e.filename}`)}),"function"==typeof(null===(o=navigator.clipboard)||void 0===o?void 0:o.writeText)&&(0,g.tZ)("button",{className:"file__detail file__detail--secondary file__detail--clipboard",type:"button",onClick:()=>{const t=t=>{""!==t&&("function"==typeof navigator.share?navigator.share({title:e.filename,url:t}).then((()=>s(e.index))):navigator.clipboard.writeText(t).then((()=>s(e.index))))},n=c.current[e.index];null!=n?t(n):(c.current[e.index]="",m.Z.getTorrentContentsDataPermalink(i,[e.index]).then((n=>{c.current[e.index]=n,t(n)}),(()=>{c.current[e.index]=null})))},children:a===e.index?(0,g.tZ)(C.MC,{}):(0,g.tZ)(C.TU,{})})]},e.filename)}));return(0,g.tZ)("div",{className:"directory-tree__node directory-tree__node--file-list",children:u})};var Pn={name:"r5l0s9",styles:"width:100%;text-align:left;:focus{outline:none;-webkit-tap-highlight-color:transparent;}:focus-visible{outline:dashed;}"};const xn=e=>{let{depth:t,directoryName:n,id:i,itemsTree:r,hash:l,path:a,isSelected:s,onItemSelect:c}=e;const[u,h]=(0,o.useState)(!1),m=[...a,n];return(0,g.BX)("div",{className:U()("directory-tree__branch",`directory-tree__branch--depth-${t}`,{"directory-tree__node--selected":s}),children:[(0,g.tZ)("button",{className:U()("directory-tree__node","directory-tree__node--selectable directory-tree__node--directory",{"is-expanded":u}),css:Pn,type:"button",onClick:()=>h(!u),title:n,children:(0,g.BX)("div",{className:"file__label",children:[(0,g.BX)("div",{className:"file__checkbox directory-tree__checkbox",children:[(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--checkbox",children:(0,g.tZ)(d.XZ,{checked:s,id:i,onClick:()=>c({type:"directory",depth:t,path:m,select:!s})})}),(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--icon",children:u?(0,g.tZ)(C.DB,{}):(0,g.tZ)(C.Bm,{})})]}),(0,g.tZ)("div",{className:"file__name",children:n})]})}),u?(0,g.tZ)("div",{className:"directory-tree__node directory-tree__node--group",children:(0,g.tZ)(Dn,{depth:t,hash:l,onItemSelect:c,path:m,itemsTree:r},`${u}-${t}`)}):null]})},Dn=e=>{const{depth:t=0,itemsTree:n,hash:i,path:r,onItemSelect:l}=e,{files:a,directories:s}=n,o=t+1,d=null!=s?Object.keys(s).sort(((e,t)=>e.localeCompare(t))).map(((e,t)=>{const a=n.directories&&n.directories[e],s=`${t}${o}${e}`,d=a&&a.isSelected||!1;return null==a?null:(0,g.tZ)(xn,{depth:o,directoryName:e,hash:i,id:s,isSelected:d,itemsTree:a,onItemSelect:l,path:r},s)})):[],c=null!=a&&Object.keys(a).length>0?(0,g.tZ)(Sn,{depth:o,hash:i,onItemSelect:l,path:r,items:n.files},`files-${o}`):null;return(0,g.tZ)("div",{className:"directory-tree__tree",children:d.concat(c)})},Bn=(0,l.Pi)((()=>{var e,t;const[n,i]=(0,o.useState)([]),[r,l]=(0,o.useState)({}),[a,c]=(0,o.useState)([]),{i18n:u}=(0,s.mV)();if((0,o.useEffect)((()=>{var e,t;"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&m.Z.fetchTorrentContents(null===(t=_.Z.activeModal)||void 0===t?void 0:t.hash).then((e=>{null!=e&&(i(e),l(kn.getSelectionTree(e)))}))}),[]),"torrent-details"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;const{hash:h}=null===_.Z||void 0===_.Z?void 0:_.Z.activeModal;let p=null,f=null,b=!1;(null==n?void 0:n.length)>0?(b=a.length>=n.length,p=(0,g.BX)("div",{className:"file__checkbox directory-tree__checkbox",children:[(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--checkbox",children:(0,g.tZ)(d.p7,{children:(0,g.tZ)(d.XZ,{checked:b,id:"select-all",onClick:()=>{const e=kn.getSelectionTree(n,a.length<n.length);l(e),c(kn.getSelectedItems(e))}})})}),(0,g.tZ)("div",{className:"directory-tree__checkbox__item directory-tree__checkbox__item--icon",children:(0,g.tZ)(C.Zz,{})})]}),f=(0,g.tZ)(Dn,{depth:0,onItemSelect:e=>{const t=kn.applySelection(r,e);l(t),c(kn.getSelectedItems(t))},hash:h,path:[],itemsTree:r})):(p=(0,g.tZ)(C.Zz,{}),f=(0,g.tZ)("div",{className:"directory-tree__node directory-tree__node--file",children:(0,g.tZ)(s.cC,{id:"torrents.details.files.loading"})}));const Z=U()("directory-tree__node","directory-tree__parent-directory torrent-details__section__heading",{"directory-tree__node--selected":b}),v=(0,g.tZ)("div",{className:Z,children:(0,g.BX)("div",{className:"file__label",children:[p,(0,g.tZ)("div",{className:"file__name",children:null===(t=nt.Z.torrents)||void 0===t?void 0:t[h].directory})]})}),y=U()("inverse directory-tree__wrapper",{"directory-tree__wrapper--toolbar-visible":a.length>0});return(0,g.BX)(d.l0,{className:y,onChange:e=>{let{event:t}=e;if(null!=t.target&&"file-priority"===t.target.name){const e=t.target;e.value&&m.Z.setFilePriority(h,{indices:a,priority:Number(e.value)})}},children:[(0,g.tZ)("div",{className:"directory-tree__selection-toolbar",children:(0,g.BX)(d.p7,{align:"center",children:[(0,g.tZ)(d.U2,{width:"one-quarter",grow:!1,shrink:!1,children:(0,g.tZ)(s.cC,{id:"torrents.details.selected.files",values:{count:a.length,countElement:(0,g.tZ)("span",{className:"directory-tree__selection-toolbar__item-count",children:a.length})}})}),(0,g.tZ)(d.zx,{onClick:e=>{e.preventDefault();const{baseURI:t}=re.Z,n=document.createElement("a");n.download="",n.href=`${t}api/torrents/${h}/contents/${a.join(",")}/data`,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},grow:!1,shrink:!1,children:(0,g.tZ)(s.cC,{id:"torrents.details.files.download.file",values:{count:a.length}})}),(0,g.BX)(d.Ph,{id:"file-priority",persistentPlaceholder:!0,shrink:!1,defaultID:"",children:[(0,g.tZ)(d.Ql,{id:-1,isPlaceholder:!0,children:(0,g.tZ)(s.cC,{id:"torrents.details.selected.files.set.priority"})}),(0,g.tZ)(d.Ql,{id:0,children:u._("priority.dont.download")}),(0,g.tZ)(d.Ql,{id:1,children:u._("priority.normal")}),(0,g.tZ)(d.Ql,{id:2,children:u._("priority.high")})]})]})}),(0,g.BX)("div",{className:"directory-tree torrent-details__section torrent-details__section--file-tree modal__content--nested-scroll__content",children:[v,f]})]})})),jn=Bn,Xn=(0,l.Pi)((()=>{var e;const{i18n:t}=(0,s.mV)();if("torrent-details"!==(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))return null;const n=nt.Z.torrents[_.Z.activeModal.hash];if(null==n)return null;const i=(0,g.tZ)("span",{className:"not-available",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.none"})});return(0,g.tZ)("div",{className:"torrent-details__section torrent-details__section--general",children:(0,g.tZ)("table",{className:"torrent-details__table table",children:(0,g.BX)("tbody",{children:[(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.general"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--dateAdded",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.added"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.dateAdded>0?t.date(new Date(1e3*n.dateAdded),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"}):i})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--location",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.location"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.directory})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--tags",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.tags"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.tags.length?(r=n.tags,r.map((e=>(0,g.tZ)("span",{className:"tag",children:e},e)))):i})]}),(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.transfer"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--dateFinished",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.finished"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.dateFinished>0?t.date(new Date(1e3*n.dateFinished),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"}):i})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--downloaded",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.downloaded"})}),(0,g.BX)("td",{className:"torrent-details__detail__value",children:[t.number(n.percentComplete),(0,g.tZ)("em",{className:"unit",children:"%"})]})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--peers",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.peers"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.connected",values:{connectedCount:n.peersConnected,connected:t.number(n.peersConnected),total:t.number(n.peersTotal)}})})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--seeds",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.seeds"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.connected",values:{connectedCount:n.seedsConnected,connected:t.number(n.seedsConnected),total:t.number(n.seedsTotal)}})})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--dateActive",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.active"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:0===n.dateActive?i:-1===n.dateActive?t._("torrents.details.general.date.active.now"):t.date(new Date(1e3*n.dateActive),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"})})]}),(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.torrent"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--created",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.date.created"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.dateCreated>0?t.date(new Date(1e3*n.dateCreated),{year:"numeric",month:"long",day:"2-digit",hour:"numeric",minute:"numeric"}):i})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--hash",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.hash"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.hash})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--size",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.size"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:(0,g.tZ)(On.Z,{value:n.sizeBytes})})]}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--type",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.type"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.isPrivate?t._("torrents.details.general.type.private"):t._("torrents.details.general.type.public")})]}),(0,g.tZ)("tr",{className:"torrent-details__table__heading",children:(0,g.tZ)("td",{className:"torrent-details__table__heading--tertiary",colSpan:2,children:(0,g.tZ)(s.cC,{id:"torrents.details.general.heading.tracker"})})}),(0,g.BX)("tr",{className:"torrent-details__detail torrent-details__detail--tracker-message",children:[(0,g.tZ)("td",{className:"torrent-details__detail__label",children:(0,g.tZ)(s.cC,{id:"torrents.details.general.tracker.message"})}),(0,g.tZ)("td",{className:"torrent-details__detail__value",children:n.message?n.message:i})]})]})})});var r}));var Tn=n(1109),En=n(228),Mn=n(6882);const Vn=(0,l.Pi)((()=>{var e;const{i18n:t}=(0,s.mV)(),n="torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)?nt.Z.torrents[_.Z.activeModal.hash]:void 0,[i,r]=(0,o.useState)("stop");if((0,o.useEffect)((()=>{null!=n&&n.status.includes("stopped")?r("stop"):r("start")}),[null==n?void 0:n.status]),null==n)return null;const l=(0,Tn.T)({status:n.status,upRate:n.upRate,downRate:n.downRate},"torrent-details__header");return(0,g.BX)("div",{className:l,children:[(0,g.tZ)("h1",{className:"torrent-details__heading torrent-details--name",children:n.name}),(0,g.BX)("div",{className:"torrent-details__sub-heading",children:[(0,g.BX)("ul",{className:"torrent-details__sub-heading__secondary",children:[(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary torrent-details__sub-heading__tertiary--download",children:[(0,g.tZ)(C.ki,{}),(0,g.tZ)(On.Z,{value:n.downRate,isSpeed:!0})," — ",(0,g.tZ)(On.Z,{value:n.bytesDone})]}),(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary torrent-details__sub-heading__tertiary--upload",children:[(0,g.tZ)(C.u3,{}),(0,g.tZ)(On.Z,{value:n.upRate,isSpeed:!0})," — ",(0,g.tZ)(On.Z,{value:n.upTotal})]}),(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary",children:[(0,g.tZ)(C.T_,{}),t.number(n.ratio)]}),(0,g.BX)("li",{className:"torrent-details__sub-heading__tertiary",children:[(0,g.tZ)(C.SU,{}),(0,g.tZ)(En.Z,{value:n.eta})]})]}),(0,g.BX)("ul",{className:"torrent-details__sub-heading__secondary",children:[(0,g.tZ)("li",{className:"torrent-details__sub-heading__tertiary",children:(0,g.tZ)(Nn.Z,{id:n.hash,level:n.priority,maxLevel:3,priorityType:"torrent",onChange:(e,t)=>{m.Z.setPriority({hashes:[`${e}`],priority:t})}})},"priority-meter"),(0,g.tZ)("li",{className:"torrent-details__sub-heading__tertiary",children:(0,g.BX)("button",{className:U()("torrent-details__action",{"is-active":"start"===i}),type:"button",onClick:()=>{r("start"),m.Z.startTorrents({hashes:[n.hash]})},children:[(0,g.tZ)(C.zf,{}),(0,g.tZ)(s.cC,{id:"torrents.details.actions.start"})]})},"start"),(0,g.tZ)("li",{className:"torrent-details__sub-heading__tertiary",children:(0,g.BX)("button",{className:U()("torrent-details__action",{"is-active":"stop"===i}),type:"button",onClick:()=>{r("stop"),m.Z.stopTorrents({hashes:[n.hash]})},children:[(0,g.tZ)(C.dV,{}),(0,g.tZ)(s.cC,{id:"torrents.details.actions.stop"})]})},"stop")]})]}),(0,g.tZ)(Mn.Z,{percent:(0,ve.Fl)((()=>Math.ceil(n.percentComplete))).get(),status:(0,ve.Fl)((()=>(0,Tn.o)(n.status))).get()})]})}));var In=n(3337),Rn=n(8447);var Ln={name:"17lw7on",styles:"td{max-width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}"};const Fn=()=>{const[e,t]=(0,o.useState)([]),[n,i]=(0,o.useState)(null),r=()=>{var e,n;(i(null),"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id))&&m.Z.fetchTorrentPeers(null===(n=_.Z.activeModal)||void 0===n?void 0:n.hash).then((e=>{null!=e&&t(e)}));i(re.Z.pollInterval)};return(0,o.useEffect)((()=>r()),[]),(0,In.Z)((()=>r()),n),(0,g.tZ)("div",{className:"torrent-details__section torrent-details__section--peers",children:(0,g.BX)("table",{className:"torrent-details__table table",css:Ln,children:[(0,g.tZ)("thead",{className:"torrent-details__table__heading",children:(0,g.BX)("tr",{children:[(0,g.BX)("th",{className:"torrent-details__table__heading--primary",children:[(0,g.tZ)(s.cC,{id:"torrents.details.peers"}),(0,g.tZ)(Rn.Z,{children:e.length})]}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"DL"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"UL"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"%"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"Client"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"Enc"}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:"In"})]})}),(0,g.tZ)("tbody",{children:e.map((e=>{const{country:t}=e,n=e.isEncrypted?(0,g.tZ)(C.HE,{}):null,i=e.isIncoming?(0,g.tZ)(C.FV,{}):null;return(0,g.BX)("tr",{children:[(0,g.BX)("td",{children:[(0,g.BX)("span",{className:"peers-list__flag",children:[(0,g.tZ)(o.Suspense,{fallback:(0,g.tZ)(C.$j,{}),children:(0,g.tZ)(C.AW,{countryCode:t})}),(0,g.tZ)("span",{className:"peers-list__flag__text",children:t})]}),e.address]}),(0,g.tZ)("td",{children:(0,g.tZ)(On.Z,{value:e.downloadRate,isSpeed:!0})}),(0,g.tZ)("td",{children:(0,g.tZ)(On.Z,{value:e.uploadRate,isSpeed:!0})}),(0,g.tZ)("td",{children:`${Math.ceil(e.completedPercent)}%`}),(0,g.tZ)("td",{children:e.clientVersion}),(0,g.tZ)("td",{className:"peers-list__encryption",children:n}),(0,g.tZ)("td",{className:"peers-list__incoming",children:i})]},e.address)}))})]})})},$n=()=>{const[e,t]=(0,o.useState)([]),n=e.length,i=["http","udp","dht"],r=e.map((e=>(0,g.BX)("tr",{children:[(0,g.tZ)("td",{children:e.url}),(0,g.tZ)("td",{children:i[e.type-1]})]},e.url)));return(0,o.useEffect)((()=>{var e,n;"torrent-details"===(null===(e=_.Z.activeModal)||void 0===e?void 0:e.id)&&m.Z.fetchTorrentTrackers(null===(n=_.Z.activeModal)||void 0===n?void 0:n.hash).then((e=>{null!=e&&t(e)}))}),[]),(0,g.tZ)("div",{className:"torrent-details__trackers torrent-details__section",children:(0,g.BX)("table",{className:"torrent-details__table table",children:[(0,g.tZ)("thead",{className:"torrent-details__table__heading",children:(0,g.BX)("tr",{children:[(0,g.BX)("th",{className:"torrent-details__table__heading--primary",children:[(0,g.tZ)(s.cC,{id:"torrents.details.trackers"}),(0,g.tZ)(Rn.Z,{children:n})]}),(0,g.tZ)("th",{className:"torrent-details__table__heading--secondary",children:(0,g.tZ)(s.cC,{id:"torrents.details.trackers.type"})})]})}),(0,g.tZ)("tbody",{children:r})]})})},zn=(0,l.Pi)((()=>{const{i18n:e}=(0,s.mV)(),{isSmallScreen:t}=re.Z,n={"torrent-details":{content:Xn,label:e._("torrents.details.details")},"torrent-contents":{content:jn,label:e._("torrents.details.files"),modalContentClasses:"modal__content--nested-scroll"},"torrent-peers":{content:Fn,label:e._("torrents.details.peers")},"torrent-trackers":{content:$n,label:e._("torrents.details.trackers")},"torrent-mediainfo":{content:fn,label:e._("torrents.details.mediainfo"),modalContentClasses:"modal__content--nested-scroll"}};return(0,g.tZ)(pe,{heading:(0,g.tZ)(Vn,{},"torrent-heading"),size:"large",tabs:n,orientation:t?"horizontal":"vertical",tabsInBody:!t})})),Un=e=>{switch(e){case"add-torrents":return(0,g.tZ)(ge,{});case"confirm":return(0,g.tZ)(fe,{});case"feeds":return(0,g.tZ)(tt,{});case"generate-magnet":return(0,g.tZ)(lt,{});case"move-torrents":return(0,g.tZ)(st,{});case"remove-torrents":return(0,g.tZ)(ot,{});case"set-taxonomy":return(0,g.tZ)(dt,{});case"set-trackers":return(0,g.tZ)(ct,{});case"settings":return(0,g.tZ)(gn,{});case"torrent-details":return(0,g.tZ)(zn,{});default:return null}},Hn=(0,l.Pi)((()=>{const{id:e}=_.Z.activeModal||{};let t;return(0,a.Z)("Escape",(()=>p.Z.dismissModal())),null!=e&&(t=(0,g.tZ)(i.Z,{classNames:"modal__animation",timeout:{enter:500,exit:500},children:(0,g.BX)("div",{className:"modal",children:[(0,g.tZ)("div",{className:"modal__overlay",role:"none",onClick:()=>{p.Z.dismissModal()}}),Un(e)]})},e)),(0,g.tZ)(r.Z,{children:t})}))}}]);